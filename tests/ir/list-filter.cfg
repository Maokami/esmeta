def filter(list: List, f: Function) {
  1: let clist = (copy list)[#1] -> 2
  2: if (= clist.length 0) then 3 else 4
  3: %0 = clist -> 10
  4: let hd = (pop < clist) -> 5
  5: call fhd = f(hd) -> 6
  6: call ftl = clo<filter>(clist, f) -> 7
  7: if fhd then 8 else 9
  8: push hd > ftl -> 9
  9: %0 = ftl -> 10
  10: return %0
}

def even(i: int) {
  1: let r = (% i 2)
  2: return (= r 0)
}

1: let list = (new [1, 2, 3, 4, 5])[#1]
2: call evenlist = clo<filter>(list, clo<even>)
3: {
  assert (= evenlist[0] 2)
  assert (= evenlist[1] 4)
}
