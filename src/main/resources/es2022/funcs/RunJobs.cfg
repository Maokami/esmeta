@main def RunJobs() {
  0: call %0 = clo<InitializeHostDefinedRealm>() -> 1
  1: call %1 = clo<HostEnqueuePromiseJob>(clo<ScriptEvaluationJob>, @CONTEXT.Realm) -> 2
  2: loop[repeat] (! (= @JOB_QUEUE.length 0)) then 3 else 6
  3: {
    // clean the execution context
    @CONTEXT = null
    (pop < @EXECUTION_STACK)
    assert (= @EXECUTION_STACK.length 0)
    
    // get a next job
    let jobRecord = (pop < @JOB_QUEUE)

    // initialize the execution context
    // TODO SubMap of ExecutionContext
    @CONTEXT = (new ExecutionContext())[#0]
    @CONTEXT.Function = null
    @CONTEXT.Realm = jobRecord.Realm
    @CONTEXT.ScriptOrModule = jobRecord.ScriptOrModule
    push @EXECUTION_STACK < @CONTEXT
  } -> 4
  4: call result = jobRecord.Job() -> 5
  5: [? result] -> 2
  6: return undefined
}
